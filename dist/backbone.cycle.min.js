// Backbone.Cycle, v1.0.6
// Copyright (c)2014 Michael Heim, Zeilenwechsel.de
// Distributed under MIT license
// http://github.com/hashchange/backbone.cycle


!function(Backbone,_){"use strict";function a(a,b){var c=a%b.length;return 0>c&&(c=b.length+c),b.at(c)}Backbone.Cycle={Model:{ahead:function(b,c){var d=c||this.collection,e=d.indexOf(this);if(-1===e)throw new Error("Model "+this.cid+"doesn't exist in the collection.");return a(e+b,d)},behind:function(a,b){return this.ahead(-a,b)},next:function(a){return this.ahead(1,a)},prev:function(a){return this.behind(1,a)},aheadNoLoop:function(a,b){var c=b||this.collection,d=c.indexOf(this);if(-1===d)throw new Error("Model "+this.cid+"doesn't exist in the collection.");return c.at(d+a)},behindNoLoop:function(a,b){return this.aheadNoLoop(-a,b)},nextNoLoop:function(a){return this.aheadNoLoop(1,a)},prevNoLoop:function(a){return this.behindNoLoop(1,a)},_cycleType:"Backbone.Cycle.Model"}},Backbone.Cycle.SelectableModel=function(){},_.extend(Backbone.Cycle.SelectableModel.prototype,Backbone.Cycle.Model,{_cycleType:"Backbone.Cycle.SelectableModel"}),Backbone.Cycle.SelectableModel.applyTo=function(a){Backbone.Select.Me.applyTo(a),_.extend(a,new Backbone.Cycle.SelectableModel)},Backbone.Cycle.SelectableCollection=function(){},_.extend(Backbone.Cycle.SelectableCollection.prototype,Backbone.Cycle.Collection,{selectAt:function(a){var b=this.at(a);if(!b)throw new Error("Model with index "+a+" doesn't exist in the collection and can't be selected.");b.select()},selectNext:function(){return this.next().select(),this},selectPrev:function(){return this.prev().select(),this},selectNextNoLoop:function(){var a=this.nextNoLoop();return a&&a.select(),this},selectPrevNoLoop:function(){var a=this.prevNoLoop();return a&&a.select(),this},ahead:function(b){if(!this.selected)throw new Error("Illegal call of SelectableCollection navigation method. No model had been selected to begin with.");return a(this.indexOf(this.selected)+b,this)},behind:function(a){return this.ahead(-a)},next:function(){return this.ahead(1)},prev:function(){return this.behind(1)},aheadNoLoop:function(a){if(!this.selected)throw new Error("Illegal call of SelectableCollection navigation method. No model had been selected to begin with.");return this.at(this.indexOf(this.selected)+a)},behindNoLoop:function(a){return this.aheadNoLoop(-a)},nextNoLoop:function(){return this.aheadNoLoop(1)},prevNoLoop:function(){return this.behindNoLoop(1)},selectInitial:function(){this.length&&!this.selected&&"first"===this.initialSelection&&this.first().select()},selectOnRemove:function(b,c,d){var e,f;d||(d={}),"remove"===d._externalEvent&&(this.selectIfRemoved&&"none"===this.selectIfRemoved||!this.length||(f=d.index,e=-1!==this.selectIfRemoved.indexOf("next")?f:f-1,-1!==this.selectIfRemoved.indexOf("NoLoop")&&(e=Math.max(Math.min(e,this.length-1),0)),a(e,this).select()))},_cycleType:"Backbone.Cycle.SelectableCollection"}),Backbone.Cycle.SelectableCollection.applyTo=function(a,b,c){var d,e,f;if(arguments.length<2)throw new Error("The `models` parameter has not been passed to Backbone.Cycle.SelectableCollection.applyTo. Its value can be undefined if no models are passed in during instantiation, but even so, it must be provided.");if(c||(c={}),a.initialSelection=c.initialSelection||"none",a.selectIfRemoved=c.selectIfRemoved||"none",!_.contains(["first","none"],a.initialSelection))throw new Error('Invalid initialSelection value "'+a.initialSelection+'"');if(!_.contains(["prev","next","prevNoLoop","nextNoLoop","none"],a.selectIfRemoved))throw new Error('Invalid selectIfRemoved value "'+a.selectIfRemoved+'"');d="none"!==a.initialSelection,e="none"!==a.selectIfRemoved,f=c.enableModelSharing||d||e,Backbone.Select.One.applyTo(a,b,{enableModelSharing:f}),_.extend(a,new Backbone.Cycle.SelectableCollection),e&&a.listenTo(a,"deselect:one",a.selectOnRemove),d&&(!a.selected&&b&&b.length&&(a.selected=b[0],b[0].select()),a.listenTo(a,"add",a.selectInitial),a.listenTo(a,"reset",a.selectInitial))}}(Backbone,_);
//# sourceMappingURL=backbone.cycle.min.map